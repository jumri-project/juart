import matplotlib.colors as colors
import numpy as np


def colormap():
    X = np.array(
        [
            [0.015625, 0.015625, 0.015625],
            [0.03515625, 0.03515625, 0.03125],
            [0.0546875, 0.0546875, 0.046875],
            [0.0703125, 0.0703125, 0.06640625],
            [0.0859375, 0.0859375, 0.08203125],
            [0.10546875, 0.10546875, 0.09765625],
            [0.125, 0.125, 0.11328125],
            [0.140625, 0.140625, 0.12890625],
            [0.16015625, 0.16015625, 0.1484375],
            [0.17578125, 0.17578125, 0.1640625],
            [0.1953125, 0.1953125, 0.1796875],
            [0.2109375, 0.2109375, 0.1953125],
            [0.23046875, 0.23046875, 0.21484375],
            [0.24609375, 0.24609375, 0.23046875],
            [0.265625, 0.265625, 0.24609375],
            [0.28125, 0.28125, 0.26171875],
            [0.30078125, 0.30078125, 0.27734375],
            [0.31640625, 0.31640625, 0.29296875],
            [0.3359375, 0.3359375, 0.3125],
            [0.35546875, 0.35546875, 0.328125],
            [0.37109375, 0.37109375, 0.34375],
            [0.38671875, 0.38671875, 0.359375],
            [0.40625, 0.40625, 0.37890625],
            [0.42578125, 0.42578125, 0.39453125],
            [0.44140625, 0.44140625, 0.41015625],
            [0.4609375, 0.4609375, 0.42578125],
            [0.4765625, 0.4765625, 0.44140625],
            [0.49609375, 0.49609375, 0.4609375],
            [0.51171875, 0.51171875, 0.4765625],
            [0.53125, 0.53125, 0.4921875],
            [0.546875, 0.546875, 0.5078125],
            [0.56640625, 0.56640625, 0.5234375],
            [0.58203125, 0.58203125, 0.54296875],
            [0.6015625, 0.6015625, 0.55859375],
            [0.6171875, 0.6171875, 0.57421875],
            [0.63671875, 0.63671875, 0.58984375],
            [0.65625, 0.65625, 0.609375],
            [0.671875, 0.671875, 0.625],
            [0.71875, 0.71875, 0.53515625],
            [0.76171875, 0.76171875, 0.4453125],
            [0.80859375, 0.80859375, 0.35546875],
            [0.85546875, 0.85546875, 0.265625],
            [0.90234375, 0.90234375, 0.1796875],
            [0.9453125, 0.9453125, 0.08984375],
            [0.98828125, 0.98828125, 0.0],
            [0.98828125, 0.91796875, 0.0390625],
            [0.98828125, 0.84765625, 0.078125],
            [0.98828125, 0.77734375, 0.12109375],
            [0.98828125, 0.70703125, 0.16015625],
            [0.98828125, 0.63671875, 0.19921875],
            [0.9921875, 0.56640625, 0.23828125],
            [0.9921875, 0.5, 0.28125],
            [0.875, 0.4609375, 0.3984375],
            [0.76171875, 0.421875, 0.515625],
            [0.64453125, 0.38671875, 0.63671875],
            [0.53125, 0.34765625, 0.75390625],
            [0.4140625, 0.3125, 0.87109375],
            [0.30078125, 0.2734375, 0.9921875],
            [0.171875, 0.16470588, 0.99609375],
            [0.1328125, 0.1254902, 0.99609375],
            [0.08984375, 0.08627451, 0.99609375],
            [0.046875, 0.04705882, 0.99609375],
            [0.0078125, 0.01171875, 0.99609375],
        ]
    )  # hardcoded

    # Upsample X to 256
    X = np.asarray(
        (
            np.interp(
                np.linspace(0, 1, num=1024), np.linspace(0, 1, num=X.shape[0]), X[:, 0]
            ),
            np.interp(
                np.linspace(0, 1, num=1024), np.linspace(0, 1, num=X.shape[0]), X[:, 1]
            ),
            np.interp(
                np.linspace(0, 1, num=1024), np.linspace(0, 1, num=X.shape[0]), X[:, 2]
            ),
        )
    ).T

    N = X.shape[0]

    r = np.linspace(0.0, 1.0, N + 1)
    r = np.sort(np.concatenate((r, r)))[1:-1]

    rd = np.concatenate([[X[i, 0], X[i, 0]] for i in range(N)])
    gr = np.concatenate([[X[i, 1], X[i, 1]] for i in range(N)])
    bl = np.concatenate([[X[i, 2], X[i, 2]] for i in range(N)])

    rd = tuple([(r[i], rd[i], rd[i]) for i in range(2 * N)])
    gr = tuple([(r[i], gr[i], gr[i]) for i in range(2 * N)])
    bl = tuple([(r[i], bl[i], bl[i]) for i in range(2 * N)])

    cdict = {"red": rd, "green": gr, "blue": bl}

    return colors.LinearSegmentedColormap("CustomMap", cdict, N)
